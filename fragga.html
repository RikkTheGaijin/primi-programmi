<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fragga l'Alieno - Space Shooter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
        }

        .container {
            background: rgba(20, 20, 35, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 0 50px rgba(0, 200, 255, 0.5);
            border: 2px solid #0096ff;
        }

        h1 {
            color: #00ff00;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 0 0 10px #00ff00;
        }

        .subtitle {
            color: #0096ff;
            text-align: center;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            color: #0096ff;
            font-size: 0.9em;
        }

        .info-value {
            color: #00ff00;
            font-weight: bold;
            font-size: 1.5em;
        }

        canvas {
            border: 3px solid #00d4ff;
            border-radius: 10px;
            background: #000;
            display: block;
            margin: 0 auto;
        }

        .controls {
            margin-top: 15px;
            text-align: center;
        }

        button {
            padding: 12px 30px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            background: linear-gradient(135deg, #00d4ff, #0096ff);
            color: #000;
            border: 1px solid rgba(0, 200, 255, 0.5);
            margin: 0 5px;
        }

        button:hover {
            background: linear-gradient(135deg, #00e5ff, #00a8ff);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 200, 255, 0.5);
        }

        .instructions {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 193, 7, 0.15);
            border-radius: 10px;
            border-left: 4px solid #ffc107;
            text-align: left;
        }

        .instructions h3 {
            color: #ffc107;
            margin-bottom: 10px;
        }

        .instructions ul {
            color: #ccc;
            margin-left: 20px;
        }

        .game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 35, 0.98);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 200, 255, 0.6);
            text-align: center;
            display: none;
            z-index: 1000;
            border: 2px solid rgba(0, 200, 255, 0.5);
        }

        .game-over h2 {
            color: #ff4444;
            margin-bottom: 20px;
            font-size: 2em;
            text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
        }

        .game-over .final-score {
            font-size: 2.5em;
            color: #00ff00;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ FRAGGA L'ALIENO üëæ</h1>
        <div class="subtitle">Anno 2996 - Restaurato da Turbo Pascal (1990s)</div>
        
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">Punti</div>
                <div class="info-value" id="score">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Vite</div>
                <div class="info-value" id="lives">3</div>
            </div>
            <div class="info-item">
                <div class="info-label">Record</div>
                <div class="info-value" id="highscore">0</div>
            </div>
        </div>

        <canvas id="gameCanvas" width="640" height="413"></canvas>

        <div class="controls">
            <button onclick="startGame()">üéÆ Inizia Partita</button>
            <button onclick="togglePause()">‚è∏Ô∏è Pausa (P)</button>
            <button onclick="resetHighScore()">üîÑ Reset Record</button>
        </div>

        <div class="instructions">
            <h3>üìã Istruzioni:</h3>
            <ul>
                <li><strong>‚Üê ‚Üí</strong> Frecce per muovere il cannone laser</li>
                <li><strong>‚Üë o SPAZIO</strong> per sparare agli alieni</li>
                <li>Distruggi gli alieni prima che ti colpiscano con le bombe!</li>
                <li>Ogni alieno distrutto: +5 punti</li>
                <li>Il tuo motto: "FRAG!!!"</li>
            </ul>
        </div>
    </div>

    <div class="game-over" id="gameOverScreen">
        <h2>GAME OVER</h2>
        <p class="final-score" id="finalScore">0</p>
        <button onclick="startGame()">üîÑ Gioca Ancora</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        let gameRunning = false;
        let gamePaused = false;
        let animationId;
        
        // Game state
        let score = 0;
        let lives = 3;
        let highScore = parseInt(localStorage.getItem('fraggaHighScore')) || 0;
        
        // Player cannon
        let cannon = {
            x: 300,
            y: 350,
            width: 40,
            height: 60,
            speed: 8,
            color: '#ffff00'
        };
        
        // Player laser
        let laser = {
            active: false,
            x: 0,
            y: 0,
            width: 6,
            height: 20,
            speed: 12,
            color: '#ff0000'
        };
        
        // Aliens
        let aliens = [];
        let alienSpawnTimer = 0;
        let alienSpeed = 2;
        
        // Bombs
        let bombs = [];
        
        // Stars for background
        let stars = [];
        
        // Input
        let keys = {};
        
        // Initialize stars
        function createStars() {
            stars = [];
            for (let i = 0; i < 500; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2
                });
            }
        }
        
        // Draw stars
        function drawStars() {
            ctx.fillStyle = '#ffffff';
            stars.forEach(star => {
                ctx.fillRect(star.x, star.y, star.size, star.size);
            });
        }
        
        // Draw cannon (laser turret)
        function drawCannon() {
            ctx.fillStyle = cannon.color;
            // Base
            ctx.fillRect(cannon.x, cannon.y + 40, 40, 20);
            // Middle section
            ctx.fillRect(cannon.x + 5, cannon.y + 20, 30, 20);
            // Top (barrel)
            ctx.fillRect(cannon.x + 15, cannon.y, 10, 30);
            
            // Details
            ctx.fillStyle = '#00ffff';
            ctx.fillRect(cannon.x + 17, cannon.y + 5, 6, 15);
        }
        
        // Draw alien ship (moving horizontally)
        function drawAlien(alien) {
            ctx.fillStyle = alien.color;
            // Main body
            ctx.beginPath();
            ctx.moveTo(alien.x + 20, alien.y);
            ctx.lineTo(alien.x + 25, alien.y + 10);
            ctx.lineTo(alien.x + 40, alien.y + 20);
            ctx.lineTo(alien.x + 25, alien.y + 20);
            ctx.lineTo(alien.x + 15, alien.y + 15);
            ctx.lineTo(alien.x + 5, alien.y + 10);
            ctx.lineTo(alien.x + 5, alien.y + 10);
            ctx.lineTo(alien.x + 20, alien.y);
            ctx.closePath();
            ctx.fill();
            
            // Cockpit
            ctx.fillStyle = '#ff00ff';
            ctx.beginPath();
            ctx.arc(alien.x + 18, alien.y + 10, 3, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // Draw bomb
        function drawBomb(bomb) {
            ctx.fillStyle = '#ff0000';
            // Bomb body
            ctx.beginPath();
            ctx.ellipse(bomb.x, bomb.y + 5, 6, 10, 0, 0, Math.PI * 2);
            ctx.fill();
            // Bomb tip
            ctx.fillStyle = '#ff8800';
            ctx.beginPath();
            ctx.arc(bomb.x, bomb.y, 4, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // Draw laser shot
        function drawLaser() {
            if (laser.active) {
                ctx.fillStyle = laser.color;
                ctx.fillRect(laser.x, laser.y, laser.width, laser.height);
            }
        }
        
        // Spawn alien
        function spawnAlien() {
            aliens.push({
                x: canvas.width,
                y: Math.random() * 200 + 20,
                width: 40,
                height: 20,
                speed: alienSpeed,
                color: `hsl(${Math.random() * 60 + 280}, 70%, 50%)`,
                bombTimer: Math.random() * 100 + 50
            });
        }
        
        // Update game
        function update() {
            if (!gameRunning || gamePaused) return;
            
            // Move cannon
            if (keys['ArrowLeft'] && cannon.x > 0) {
                cannon.x -= cannon.speed;
            }
            if (keys['ArrowRight'] && cannon.x < canvas.width - cannon.width) {
                cannon.x += cannon.speed;
            }
            
            // Shoot laser
            if ((keys['ArrowUp'] || keys[' ']) && !laser.active) {
                laser.active = true;
                laser.x = cannon.x + cannon.width / 2 - laser.width / 2;
                laser.y = cannon.y;
            }
            
            // Update laser
            if (laser.active) {
                laser.y -= laser.speed;
                if (laser.y < 0) {
                    laser.active = false;
                }
            }
            
            // Spawn aliens
            alienSpawnTimer++;
            if (alienSpawnTimer > 60) {
                spawnAlien();
                alienSpawnTimer = 0;
            }
            
            // Update aliens
            for (let i = aliens.length - 1; i >= 0; i--) {
                let alien = aliens[i];
                alien.x -= alien.speed;
                
                // Drop bomb
                alien.bombTimer--;
                if (alien.bombTimer <= 0) {
                    bombs.push({
                        x: alien.x + alien.width / 2,
                        y: alien.y + alien.height,
                        speed: 3
                    });
                    alien.bombTimer = Math.random() * 150 + 100;
                }
                
                // Remove if off screen
                if (alien.x < -alien.width) {
                    aliens.splice(i, 1);
                }
                
                // Check laser collision
                if (laser.active && 
                    laser.x < alien.x + alien.width &&
                    laser.x + laser.width > alien.x &&
                    laser.y < alien.y + alien.height &&
                    laser.y + laser.height > alien.y) {
                    
                    // Explosion effect
                    createExplosion(alien.x + alien.width / 2, alien.y + alien.height / 2);
                    
                    aliens.splice(i, 1);
                    laser.active = false;
                    score += 5;
                    updateScore();
                    
                    // Increase difficulty
                    if (score > 500 && alienSpeed < 4) {
                        alienSpeed += 0.5;
                    }
                }
            }
            
            // Update bombs
            for (let i = bombs.length - 1; i >= 0; i--) {
                let bomb = bombs[i];
                bomb.y += bomb.speed;
                
                // Remove if off screen
                if (bomb.y > canvas.height) {
                    bombs.splice(i, 1);
                    continue;
                }
                
                // Check collision with cannon
                if (bomb.x > cannon.x && bomb.x < cannon.x + cannon.width &&
                    bomb.y > cannon.y && bomb.y < cannon.y + cannon.height) {
                    bombs.splice(i, 1);
                    lives--;
                    updateLives();
                    
                    if (lives <= 0) {
                        gameOver();
                    }
                }
            }
        }
        
        // Create explosion effect
        function createExplosion(x, y) {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    ctx.strokeStyle = '#ffff00';
                    ctx.beginPath();
                    ctx.arc(x, y, i * 2, 0, Math.PI * 2);
                    ctx.stroke();
                }, i * 10);
            }
        }
        
        // Draw everything
        function draw() {
            // Clear canvas
            ctx.fillStyle = '#000000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw stars
            drawStars();
            
            // Draw ground line
            ctx.strokeStyle = '#ff00ff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height - 1);
            ctx.lineTo(canvas.width, canvas.height - 1);
            ctx.stroke();
            
            // Draw game objects
            drawCannon();
            drawLaser();
            
            aliens.forEach(alien => drawAlien(alien));
            bombs.forEach(bomb => drawBomb(bomb));
            
            // Draw "FRAG!" occasionally
            if (Math.random() < 0.01) {
                ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 50%)`;
                ctx.font = '20px Arial';
                ctx.fillText('FRAG!', Math.random() * 500, Math.random() * 300);
            }
            
            // Draw pause text
            if (gamePaused) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#00ff00';
                ctx.font = 'bold 40px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('PAUSA', canvas.width / 2, canvas.height / 2);
                ctx.textAlign = 'left';
            }
        }
        
        // Game loop
        function gameLoop() {
            update();
            draw();
            animationId = requestAnimationFrame(gameLoop);
        }
        
        // Start game
        function startGame() {
            document.getElementById('gameOverScreen').style.display = 'none';
            
            gameRunning = true;
            gamePaused = false;
            score = 0;
            lives = 3;
            aliens = [];
            bombs = [];
            laser.active = false;
            alienSpeed = 2;
            alienSpawnTimer = 0;
            cannon.x = 300;
            
            updateScore();
            updateLives();
            createStars();
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            gameLoop();
        }
        
        // Game over
        function gameOver() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score + ' punti';
            document.getElementById('gameOverScreen').style.display = 'block';
            
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('fraggaHighScore', highScore);
                document.getElementById('highscore').textContent = highScore;
            }
        }
        
        // Toggle pause
        function togglePause() {
            if (gameRunning) {
                gamePaused = !gamePaused;
            }
        }
        
        // Update score display
        function updateScore() {
            document.getElementById('score').textContent = score;
        }
        
        // Update lives display
        function updateLives() {
            document.getElementById('lives').textContent = lives;
        }
        
        // Reset high score
        function resetHighScore() {
            if (confirm('Vuoi davvero resettare il record?')) {
                highScore = 0;
                localStorage.setItem('fraggaHighScore', '0');
                document.getElementById('highscore').textContent = '0';
            }
        }
        
        // Keyboard controls
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === 'p' || e.key === 'P') {
                togglePause();
            }
            if (e.key === ' ' || e.key === 'ArrowUp') {
                e.preventDefault();
            }
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        // Initialize
        document.getElementById('highscore').textContent = highScore;
        createStars();
        draw();
    </script>
</body>
</html>
